<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>pypower.pips</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="pypower-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://www.pypower.org/">PYPOWER</a></th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="pypower-module.html">Package&nbsp;pypower</a> ::
        Module&nbsp;pips
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="pypower.pips-module.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module pips</h1><p class="nomargin-top"><span class="codelink"><a href="pypower.pips-pysrc.html">source&nbsp;code</a></span></p>
<p>Python Interior Point Solver (PIPS).</p>

<!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Functions</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Functions"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">dict</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pypower.pips-module.html#pips" class="summary-sig-name">pips</a>(<span class="summary-sig-arg">f_fcn</span>,
        <span class="summary-sig-arg">x0</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">A</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">l</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">u</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">xmin</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">xmax</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">gh_fcn</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">hess_fcn</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">opt</span>=<span class="summary-sig-default">None</span>)</span><br />
      Primal-dual interior point method for NLP (nonlinear programming).</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pypower.pips-pysrc.html#pips">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== VARIABLES ==================== -->
<a name="section-Variables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Variables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="EPS"></a><span class="summary-name">EPS</span> = <code title="2.2204460492503131e-16">2.2204460492503131e-16</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="__package__"></a><span class="summary-name">__package__</span> = <code title="'pypower'"><code class="variable-quote">'</code><code class="variable-string">pypower</code><code class="variable-quote">'</code></code>
    </td>
  </tr>
</table>
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Function Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-FunctionDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="pips"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">pips</span>(<span class="sig-arg">f_fcn</span>,
        <span class="sig-arg">x0</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">A</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">l</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">u</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">xmin</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">xmax</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">gh_fcn</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">hess_fcn</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">opt</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pypower.pips-pysrc.html#pips">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Primal-dual interior point method for NLP (nonlinear programming). 
  Minimize a function F(X) beginning from a starting point <i 
  class="math">x0</i>, subject to optional linear and nonlinear constraints
  and variable bounds:</p>
<pre class="literalblock">
       min f(x)
        x
</pre>
  <p>subject to:</p>
<pre class="literalblock">
       g(x) = 0            (nonlinear equalities)
       h(x) &lt;= 0           (nonlinear inequalities)
       l &lt;= A*x &lt;= u       (linear constraints)
       xmin &lt;= x &lt;= xmax   (variable bounds)
</pre>
  <p>Note: The calling syntax is almost identical to that of FMINCON from 
  MathWorks' Optimization Toolbox. The main difference is that the linear 
  constraints are specified with <code>A</code>, <code>L</code>, 
  <code>U</code> instead of <code>A</code>, <code>B</code>, 
  <code>Aeq</code>, <code>Beq</code>. The functions for evaluating the 
  objective function, constraints and Hessian are identical.</p>
  <p>Example from <a 
  href="http://en.wikipedia.org/wiki/Nonlinear_programming" 
  target="_top">http://en.wikipedia.org/wiki/Nonlinear_programming</a>:</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">from</span> numpy <span class="py-keyword">import</span> array, r_, float64, dot
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">from</span> scipy.sparse <span class="py-keyword">import</span> csr_matrix
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">def</span> <span class="py-defname">f2</span>(x):
<span class="py-more">... </span>    f = -x[0] * x[1] - x[1] * x[2]
<span class="py-more">... </span>    df = -r_[x[1], x[0] + x[2], x[1]]
<span class="py-more">... </span>    <span class="py-comment"># actually not used since 'hess_fcn' is provided</span>
<span class="py-more">... </span>    d2f = -array([[0, 1, 0], [1, 0, 1], [0, 1, 0]], float64)
<span class="py-more">... </span>    return f, df, d2f
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">def</span> <span class="py-defname">gh2</span>(x):
<span class="py-more">... </span>    h = dot(array([[1, -1, 1],
<span class="py-more">... </span>                   [1,  1, 1]]), x**2) + array([-2.0, -10.0])
<span class="py-more">... </span>    dh = 2 * csr_matrix(array([[ x[0], x[0]],
<span class="py-more">... </span>                               [-x[1], x[1]],
<span class="py-more">... </span>                               [ x[2], x[2]]]))
<span class="py-more">... </span>    g = array([])
<span class="py-more">... </span>    dg = None
<span class="py-more">... </span>    return h, g, dh, dg
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">def</span> <span class="py-defname">hess2</span>(x, lam, cost_mult=1):
<span class="py-more">... </span>    mu = lam[<span class="py-string">&quot;ineqnonlin&quot;</span>]
<span class="py-more">... </span>    a = r_[dot(2 * array([1, 1]), mu), -1, 0]
<span class="py-more">... </span>    b = r_[-1, dot(2 * array([-1, 1]), mu),-1]
<span class="py-more">... </span>    c = r_[0, -1, dot(2 * array([1, 1]), mu)]
<span class="py-more">... </span>    Lxx = csr_matrix(array([a, b, c]))
<span class="py-more">... </span>    return Lxx
<span class="py-prompt">&gt;&gt;&gt; </span>x0 = array([1, 1, 0], float64)
<span class="py-prompt">&gt;&gt;&gt; </span>solution = pips(f2, x0, gh_fcn=gh2, hess_fcn=hess2)
<span class="py-prompt">&gt;&gt;&gt; </span>round(solution[<span class="py-string">&quot;f&quot;</span>], 11) == -7.07106725919
<span class="py-output">True</span>
<span class="py-output"></span><span class="py-prompt">&gt;&gt;&gt; </span>solution[<span class="py-string">&quot;output&quot;</span>][<span class="py-string">&quot;iterations&quot;</span>]
<span class="py-output">8</span></pre>
  <p>Ported by Richard Lincoln from the MATLAB Interior Point Solver (MIPS)
  (v1.9) by Ray Zimmerman.  MIPS is distributed as part of the MATPOWER 
  project, developed at the Power System Engineering Research Center 
  (PSERC) (PSERC), Cornell. See <a 
  href="http://www.pserc.cornell.edu/matpower/" 
  target="_top">http://www.pserc.cornell.edu/matpower/</a> for more info. 
  MIPS was ported by Ray Zimmerman from C code written by H. Wang for his 
  PhD dissertation:</p>
  <ul>
    <li>
      &quot;On the Computation and Application of Multi-period 
      Security-Constrained Optimal Power Flow for Real-time Electricity 
      Market Operations&quot;, Cornell University, May 2007.
    </li>
  </ul>
  <p>See also:</p>
  <ul>
    <li>
      H. Wang, C. E. Murillo-Sanchez, R. D. Zimmerman, R. J. Thomas, 
      &quot;On Computational Issues of Market-Based Optimal Power 
      Flow&quot;, IEEE Transactions on Power Systems, Vol. 22, No. 3, Aug. 
      2007, pp. 1185-1193.
    </li>
  </ul>
  <p>All parameters are optional except <code>f_fcn</code> and 
  <code>x0</code>.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>f_fcn</code></strong> (callable) - Function that evaluates the objective function, its gradients and
          Hessian for a given value of <i class="math">x</i>. If there are 
          nonlinear constraints, the Hessian information is provided by the
          'hess_fcn' argument and is not required here.</li>
        <li><strong class="pname"><code>x0</code></strong> (array) - Starting value of optimization vector <i class="math">x</i>.</li>
        <li><strong class="pname"><code>A</code></strong> (csr_matrix) - Optional linear constraints.</li>
        <li><strong class="pname"><code>l</code></strong> (array) - Optional linear constraints. Default values are <i 
          class="math">-Inf</i>.</li>
        <li><strong class="pname"><code>u</code></strong> (array) - Optional linear constraints. Default values are <i 
          class="math">Inf</i>.</li>
        <li><strong class="pname"><code>xmin</code></strong> (array) - Optional lower bounds on the <i class="math">x</i> variables, 
          defaults are <i class="math">-Inf</i>.</li>
        <li><strong class="pname"><code>xmax</code></strong> (array) - Optional upper bounds on the <i class="math">x</i> variables, 
          defaults are <i class="math">Inf</i>.</li>
        <li><strong class="pname"><code>gh_fcn</code></strong> (callable) - Function that evaluates the optional nonlinear constraints and 
          their gradients for a given value of <i class="math">x</i>.</li>
        <li><strong class="pname"><code>hess_fcn</code></strong> (callable) - Handle to function that computes the Hessian of the Lagrangian 
          for given values of <i class="math">x</i>, <i 
          class="math">lambda</i> and <i class="math">mu</i>, where <i 
          class="math">lambda</i> and <i class="math">mu</i> are the 
          multipliers on the equality and inequality constraints, <i 
          class="math">g</i> and <i class="math">h</i>, respectively.</li>
        <li><strong class="pname"><code>opt</code></strong> (dict) - optional options dictionary with the following keys, all of which
          are also optional (default values shown in parentheses)
          <ul>
            <li>
              <code>verbose</code> (False) - Controls level of progress 
              output displayed
            </li>
            <li>
              <code>feastol</code> (1e-6) - termination tolerance for 
              feasibility condition
            </li>
            <li>
              <code>gradtol</code> (1e-6) - termination tolerance for 
              gradient condition
            </li>
            <li>
              <code>comptol</code> (1e-6) - termination tolerance for 
              complementarity condition
            </li>
            <li>
              <code>costtol</code> (1e-6) - termination tolerance for cost 
              condition
            </li>
            <li>
              <code>max_it</code> (150) - maximum number of iterations
            </li>
            <li>
              <code>step_control</code> (False) - set to True to enable 
              step-size control
            </li>
            <li>
              <code>max_red</code> (20) - maximum number of step-size 
              reductions if step-control is on
            </li>
            <li>
              <code>cost_mult</code> (1.0) - cost multiplier used to scale 
              the objective function for improved conditioning. Note: This 
              value is also passed as the 3rd argument to the Hessian 
              evaluation function so that it can appropriately scale the 
              objective function term in the Hessian of the Lagrangian.
            </li>
          </ul></li>
    </ul></dd>
    <dt>Returns: dict</dt>
        <dd>The solution dictionary has the following keys:
          <ul>
            <li>
              <code>x</code> - solution vector
            </li>
            <li>
              <code>f</code> - final objective function value
            </li>
            <li>
              <code>converged</code> - exit status
              <ul>
                <li>
                  True = first order optimality conditions satisfied
                </li>
                <li>
                  False = maximum number of iterations reached
                </li>
                <li>
                  None = numerically failed
                </li>
              </ul>
            </li>
            <li>
              <code>output</code> - output dictionary with keys:
              <ul>
                <li>
                  <code>iterations</code> - number of iterations performed
                </li>
                <li>
                  <code>hist</code> - list of arrays with trajectories of 
                  the following: feascond, gradcond, compcond, costcond, 
                  gamma, stepsize, obj, alphap, alphad
                </li>
                <li>
                  <code>message</code> - exit message
                </li>
              </ul>
            </li>
            <li>
              <code>lmbda</code> - dictionary containing the Langrange and 
              Kuhn-Tucker multipliers on the constraints, with keys:
              <ul>
                <li>
                  <code>eqnonlin</code> - nonlinear equality constraints
                </li>
                <li>
                  <code>ineqnonlin</code> - nonlinear inequality 
                  constraints
                </li>
                <li>
                  <code>mu_l</code> - lower (left-hand) limit on linear 
                  constraints
                </li>
                <li>
                  <code>mu_u</code> - upper (right-hand) limit on linear 
                  constraints
                </li>
                <li>
                  <code>lower</code> - lower bound on optimization 
                  variables
                </li>
                <li>
                  <code>upper</code> - upper bound on optimization 
                  variables
                </li>
              </ul>
            </li>
          </ul></dd>
  </dl>
<div class="fields">      <p><strong>See Also:</strong>
        <a href="http://www.pserc.cornell.edu/matpower/" 
        target="_top">http://www.pserc.cornell.edu/matpower/</a>
      </p>
      <p><strong>License:</strong>
        GNU GPL version 3
      </p>
      <dl><dt>Authors:</dt>
        <dd>
          Ray Zimmerman (PSERC Cornell),
          Richard Lincoln
        </dd>
      </dl>
</div></td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="pypower-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://www.pypower.org/">PYPOWER</a></th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Fri Jul 29 18:21:26 2011
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
